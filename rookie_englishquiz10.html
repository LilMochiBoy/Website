<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Boss Level - Arrange the Sentence (English)</title>
	<link rel="stylesheet" href="style.css">
	<style>
		body {
			background-image: url('icebg.jpg');
			background-size: cover;
			background-repeat: no-repeat;
			background-position: center;
			min-height: 100vh;
			margin: 0;
			font-family: 'Segoe UI', 'Arial', sans-serif;
			color: #222;
		}
		.boss-container {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			height: 60vh;
			margin-top: 30px;
		}
		.boss-img {
			width: 420px;
			height: auto;
			margin-bottom: 36px;
			display: block;
			margin-left: auto;
			margin-right: auto;
			border-radius: 32px;
			transition: transform 0.3s;
		}
		.boss-img:hover {
			transform: scale(1.05) rotate(-2deg);
		}
		.quiz-container {
			padding: 30px 0 0 0;
			max-width: 650px;
			margin: 0 auto;
			background: rgba(255,255,255,0.12);
			border-radius: 24px;
		}
		.scrambled-words {
			display: flex;
			flex-wrap: wrap;
			gap: 12px;
			margin-bottom: 18px;
			justify-content: center;
		}
		.word-btn {
			background: linear-gradient(135deg, #e3f2fd 60%, #bbdefb 100%);
			color: #333;
			border: 2px solid #2196f3;
			border-radius: 16px;
			padding: 14px 28px;
			cursor: pointer;
			font-size: 1.25em;
			box-shadow: 0 2px 12px rgba(33,150,243,0.14);
			margin: 4px;
			transition: background 0.2s, color 0.2s, border 0.2s, transform 0.2s;
			outline: none;
		}
		.word-btn.selected {
			background: linear-gradient(135deg, #2196f3 60%, #4caf50 100%);
			color: #fff;
			border: 2px solid #4caf50;
			transform: scale(1.08);
		}
		.word-btn:hover {
			background: linear-gradient(135deg, #90caf9 60%, #64b5f6 100%);
			color: #222;
			border: 2px solid #1976d2;
			transform: scale(1.05);
		}
		.answer-box {
			min-height: 44px;
			border: none;
			border-radius: 12px;
			padding: 10px;
			margin-bottom: 18px;
			background: rgba(76,175,80,0.08);
			display: flex;
			gap: 12px;
			flex-wrap: wrap;
			justify-content: center;
			box-shadow: 0 2px 12px rgba(76,175,80,0.10);
		}
		.answer-word {
			background: linear-gradient(135deg, #c8e6c9 60%, #a5d6a7 100%);
			color: #333;
			border: 2px solid #4caf50;
			border-radius: 16px;
			padding: 14px 28px;
			font-size: 1.25em;
			margin: 4px;
			box-shadow: 0 2px 12px rgba(76,175,80,0.14);
			transition: background 0.2s, color 0.2s, border 0.2s, transform 0.2s;
			cursor: pointer;
		}
		.answer-word:hover {
			background: linear-gradient(135deg, #81c784 60%, #66bb6a 100%);
			color: #222;
			border: 2px solid #388e3c;
			transform: scale(1.05);
		}
		.submit-btn {
			background: linear-gradient(90deg, #f44336 60%, #ff7961 100%);
			color: #fff;
			border: none;
			border-radius: 12px;
			padding: 12px 32px;
			font-size: 1.15em;
			cursor: pointer;
			margin-top: 14px;
			display: block;
			margin-left: auto;
			margin-right: auto;
			box-shadow: 0 2px 12px rgba(244,67,54,0.14);
			transition: background 0.2s, transform 0.2s;
		}
		.submit-btn:hover {
			background: linear-gradient(90deg, #d32f2f 60%, #ff7961 100%);
			transform: scale(1.05);
		}
		.feedback {
			font-size: 1.15em;
			margin-top: 12px;
			text-align: center;
			min-height: 32px;
			font-weight: 500;
			letter-spacing: 0.5px;
			text-shadow: 0 1px 4px rgba(33,150,243,0.10);
		}
	</style>
</head>
<body>
   <div class="boss-container">
	   <img src="Boss.png" alt="Boss" class="boss-img">
	   <div id="bossHearts" style="margin-top: 18px;"></div>
   </div>
	<div class="quiz-container">
		<div id="questionText"></div>
		<div class="scrambled-words" id="scrambledWords"></div>
		<div class="answer-box" id="answerBox"></div>
		<button class="submit-btn" id="submitBtn">Submit</button>
		<div class="feedback" id="feedback"></div>
	</div>
	<script>
// English arrange questions
const questions = [
  {
    type: "arrange",
    words: ["I", "am", "a", "student"],
    correct: "I am a student."
  },
  {
    type: "arrange",
    words: ["He", "likes", "to", "eat", "apples"],
    correct: "He likes to eat apples."
  },
  {
    type: "arrange",
    words: ["My", "mother", "is", "cooking", "in", "the", "kitchen"],
    correct: "My mother is cooking in the kitchen."
  },
  {
    type: "arrange",
    words: ["We", "will", "go", "to", "Beijing", "tomorrow"],
    correct: "We will go to Beijing tomorrow."
  },
  {
    type: "arrange",
    words: ["This", "is", "my", "schoolbag"],
    correct: "This is my schoolbag."
  },
  {
    type: "arrange",
    words: ["He", "can", "speak", "English"],
    correct: "He can speak English."
  },
  {
    type: "arrange",
    words: ["It", "is", "half", "past", "eight"],
    correct: "It is half past eight."
  },
  {
    type: "arrange",
    words: ["I", "get", "up", "at", "six", "every", "day"],
    correct: "I get up at six every day."
  },
  {
    type: "arrange",
    words: ["She", "has", "two", "dogs"],
    correct: "She has two dogs."
  },
  {
    type: "arrange",
    words: ["We", "are", "playing", "in", "the", "park"],
    correct: "We are playing in the park."
  }
];

let currentQuestion = 0;
let selectedWords = [];
let selectedWordIndices = [];
let bossMaxHearts = 5;
let bossHearts = bossMaxHearts;

const bossHeartsDiv = document.getElementById('bossHearts');
const questionText = document.getElementById('questionText');
const scrambledWords = document.getElementById('scrambledWords');
const answerBox = document.getElementById('answerBox');
const submitBtn = document.getElementById('submitBtn');
const feedback = document.getElementById('feedback');

function renderBossHearts() {
  if (!bossHeartsDiv) return;
  bossHeartsDiv.innerHTML = '';
  for (let i = 0; i < bossMaxHearts; i++) {
    const img = document.createElement('img');
    img.src = i < bossHearts ? 'Heart.png' : 'Emptyheart.png';
    img.alt = i < bossHearts ? 'Heart' : 'Empty Heart';
    img.style.width = '38px';
    img.style.height = '38px';
    img.style.margin = '0 4px';
    bossHeartsDiv.appendChild(img);
  }
}

function speakWord(word) {
  if ('speechSynthesis' in window) {
    window.speechSynthesis.cancel();
    const utter = new window.SpeechSynthesisUtterance(word);
    utter.lang = 'en-US';
    utter.rate = 1.1;
    window.speechSynthesis.speak(utter);
  }
}

function showQuestion() {
  const q = questions[currentQuestion];
  questionText.textContent = `Boss Level: Arrange the sentence (${currentQuestion + 1} / ${questions.length})`;
  scrambledWords.innerHTML = '';
  selectedWords = [];
  selectedWordIndices = [];
  answerBox.innerHTML = '';
  feedback.textContent = '';
  q.words.forEach((word, idx) => {
    const btn = document.createElement('button');
    btn.textContent = word;
    btn.className = 'word-btn';
    btn.draggable = true;
    btn.ondragstart = (e) => {
      e.dataTransfer.setData('text/plain', idx);
    };
    btn.onclick = () => selectWord(idx);
    btn.addEventListener('mousedown', (e) => { speakWord(word); });
    btn.addEventListener('touchstart', (e) => { speakWord(word); });
    scrambledWords.appendChild(btn);
  });
  answerBox.ondragover = (e) => e.preventDefault();
  answerBox.ondrop = (e) => {
    e.preventDefault();
    const idx = parseInt(e.dataTransfer.getData('text/plain'));
    selectWord(idx);
  };
  renderBossHearts();
}

function selectWord(idx) {
  const q = questions[currentQuestion];
  const btns = scrambledWords.querySelectorAll('.word-btn');
  if (!selectedWordIndices.includes(idx)) {
    btns[idx].classList.add('selected');
    selectedWords.push(q.words[idx]);
    selectedWordIndices.push(idx);
    renderAnswerBox();
  }
  speakWord(q.words[idx]);
}

function renderAnswerBox() {
  answerBox.innerHTML = '';
  selectedWords.forEach((word, i) => {
    const span = document.createElement('span');
    span.className = 'answer-word';
    span.textContent = word;
    span.draggable = true;
    span.ondragstart = (e) => {
      e.dataTransfer.setData('answer-index', i);
    };
    span.onclick = () => {
      speakWord(word);
      removeWord(i);
    };
    span.addEventListener('mousedown', (e) => { speakWord(word); });
    span.addEventListener('touchstart', (e) => { speakWord(word); });
    answerBox.appendChild(span);
  });

  answerBox.ondragover = (e) => e.preventDefault();
  answerBox.ondrop = (e) => {
    e.preventDefault();
    const fromIdx = parseInt(e.dataTransfer.getData('answer-index'));
    const toIdx = Array.from(answerBox.children).indexOf(e.target);
    if (!isNaN(fromIdx) && toIdx !== -1 && fromIdx !== toIdx) {
      const word = selectedWords.splice(fromIdx, 1)[0];
      const wordIdx = selectedWordIndices.splice(fromIdx, 1)[0];
      selectedWords.splice(toIdx, 0, word);
      selectedWordIndices.splice(toIdx, 0, wordIdx);
      renderAnswerBox();
    }
  };
}

function removeWord(i) {
  selectedWords.splice(i, 1);
  selectedWordIndices.splice(i, 1);
  const btns = scrambledWords.querySelectorAll('.word-btn');
  btns.forEach(btn => btn.classList.remove('selected'));
  selectedWordIndices.forEach(idx => btns[idx].classList.add('selected'));
  renderAnswerBox();
}

function checkAnswer() {
  const q = questions[currentQuestion];
  const userAnswer = selectedWords.join(' ') + '.';
  if (userAnswer === q.correct) {
    if (bossHearts > 0) bossHearts--;
    renderBossHearts();
    feedback.textContent = 'Correct!';
    feedback.style.color = '#4caf50';
    setTimeout(() => {
      currentQuestion++;
      if (currentQuestion < questions.length && bossHearts > 0) {
        showQuestion();
      } else if (bossHearts === 0) {
        questionText.textContent = 'You defeated the Boss!';
        scrambledWords.innerHTML = '';
        answerBox.innerHTML = '';
        submitBtn.style.display = 'none';
        feedback.textContent = '';
        renderBossHearts();
      } else {
        questionText.textContent = 'Congratulations! You completed the game!';
        scrambledWords.innerHTML = '';
        answerBox.innerHTML = '';
        submitBtn.style.display = 'none';
        feedback.textContent = '';
      }
    }, 1000);
  } else {
    feedback.textContent = 'Wrong! Try again.';
    feedback.style.color = '#f44336';
    setTimeout(() => {
      showQuestion();
    }, 1000);
  }
}

submitBtn.onclick = checkAnswer;

renderBossHearts();
showQuestion();
</script>
</body>
</html>
